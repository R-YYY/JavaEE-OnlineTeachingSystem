{"remainingRequest":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\src\\components\\studentPages\\task\\StudentAttendance.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\src\\components\\studentPages\\task\\StudentAttendance.vue","mtime":1639102513945},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636890494000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\babel-loader\\lib\\index.js","mtime":1636890492000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636890494000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1636890500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJTdHVkZW50QXR0ZW5kYW5jZSIsDQogIGluamVjdDogWydyZWxvYWQnXSwgICAgIC8v5rOo5YWl5L6d6LWWDQogIHByb3BzOnsNCiAgICBjb3Vyc2VfaWQ6ew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJycsDQogICAgfSwNCiAgfSwNCiAgZGF0YSgpew0KICAgIHJldHVybiB7DQogICAgICBhdHRlbmRhbmNlX2xpc3Q6W10sDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCl7DQogICAgbGV0IHRoYXQ9dGhpczsNCiAgICBsZXQgaWQ9dGhhdC5jb3Vyc2VfaWQ7DQogICAgbGV0IHN0dWRlbnRfaWQ9JzE5NTEwMTQnOw0KICAgIHRoaXMuJGF4aW9zLmdldCgnL2F0dGVuZC9nZXRBdHRlbmRJbmZvTGlzdCcsDQogICAgICAgIHsNCiAgICAgICAgICBwYXJhbXM6ew0KICAgICAgICAgICAgY291cnNlX0lEOmlkLA0KICAgICAgICAgICAgc3R1ZGVudF9JRDpzdHVkZW50X2lkLA0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICkudGhlbigNCiAgICAgICAgKHJlc3BvbnNlKT0+ew0KICAgICAgICAgIHRoYXQuYXR0ZW5kYW5jZV9saXN0PXJlc3BvbnNlLmRhdGE7DQogICAgICAgIH0NCiAgICApDQogIH0sDQogIG1ldGhvZHM6ew0KICAgIGJ0bkNsaWNrKHR5cGUsc3RhcnRfdGltZSkgew0KICAgICAgaWYodHlwZT09PSflh7rli6QnfHx0eXBlPT09J+e8uuWLpCcpew0KDQogICAgICB9DQogICAgICBlbHNlew0KICAgICAgICBsZXQgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgICBsZXQgaWQ9dGhpcy5jb3Vyc2VfaWQ7DQogICAgICAgIGxldCBzdHVkZW50X2lkPScxOTUxMDE0JzsNCiAgICAgICAgZGF0YS5hcHBlbmQoImNvdXJzZV9JRCIsaWQpOw0KICAgICAgICBjb25zb2xlLmxvZyhpZCk7DQogICAgICAgIGNvbnNvbGUubG9nKHN0YXJ0X3RpbWUpOw0KICAgICAgICBjb25zb2xlLmxvZyhzdHVkZW50X2lkKTsNCiAgICAgICAgZGF0YS5hcHBlbmQoInN0YXJ0X3RpbWUiLHN0YXJ0X3RpbWUpOw0KICAgICAgICBkYXRhLmFwcGVuZCgic3R1ZGVudF9JRCIsc3R1ZGVudF9pZCk7DQogICAgICAgIHRoaXMuJGF4aW9zKHsNCiAgICAgICAgICB1cmw6Jy9hdHRlbmQvYWRkQXR0ZW5kJywNCiAgICAgICAgICBtZXRob2Q6IlBPU1QiLA0KICAgICAgICAgIGRhdGE6ZGF0YSwNCiAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsNCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT09IDEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRhbGVydCgn6ICD5Yuk5oiQ5Yqf77yBJywgJycsIHsNCiAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHRoaXMucmVsb2FkKCk7ICAgIC8v6LCD55So5Yi35pawDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuW3suiAg+WLpO+8gSIsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLogIPli6TlpLHotKXvvIHor7fph43or5XvvIEiLA0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["StudentAttendance.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StudentAttendance.vue","sourceRoot":"src/components/studentPages/task","sourcesContent":["<template>\r\n  <div id=\"stuAttendance\">\r\n    <el-table\r\n        :data=\"attendance_list\"\r\n        style=\"width: 100%;padding-left: 50px;font-size: 17px\"\r\n        :default-sort = \"{prop: 'start_time', order: 'descending'}\"\r\n    >\r\n      <el-table-column style=\"padding-left: 20px;font-size: 17px\" prop=\"start_time\"\r\n          label=\"时间\"\r\n          sortable\r\n          width=\"500\">\r\n        <template slot-scope=\"scope\">\r\n          <span class=\"time\">{{ scope.row.start_time }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column>\r\n        <template slot-scope=\"scope\">\r\n          <div :class=\"[{'success':(scope.row.attend_type === '出勤')},\r\n                {'danger':(scope.row.attend_type === '缺勤')},\r\n                {'normal':(scope.row.attend_type === '待考勤')}\r\n                ]\"\r\n              @click=\"btnClick(scope.row.attend_type,scope.row.start_time)\">{{ scope.row.attend_type }}</div>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"StudentAttendance\",\r\n  inject: ['reload'],     //注入依赖\r\n  props:{\r\n    course_id:{\r\n      type: String,\r\n      default: '',\r\n    },\r\n  },\r\n  data(){\r\n    return {\r\n      attendance_list:[],\r\n    }\r\n  },\r\n  mounted(){\r\n    let that=this;\r\n    let id=that.course_id;\r\n    let student_id='1951014';\r\n    this.$axios.get('/attend/getAttendInfoList',\r\n        {\r\n          params:{\r\n            course_ID:id,\r\n            student_ID:student_id,\r\n          }\r\n        }\r\n    ).then(\r\n        (response)=>{\r\n          that.attendance_list=response.data;\r\n        }\r\n    )\r\n  },\r\n  methods:{\r\n    btnClick(type,start_time) {\r\n      if(type==='出勤'||type==='缺勤'){\r\n\r\n      }\r\n      else{\r\n        let data = new FormData();\r\n        let id=this.course_id;\r\n        let student_id='1951014';\r\n        data.append(\"course_ID\",id);\r\n        console.log(id);\r\n        console.log(start_time);\r\n        console.log(student_id);\r\n        data.append(\"start_time\",start_time);\r\n        data.append(\"student_ID\",student_id);\r\n        this.$axios({\r\n          url:'/attend/addAttend',\r\n          method:\"POST\",\r\n          data:data,\r\n        })\r\n            .then((response) => {\r\n              console.log(response.data);\r\n              if (response.data === 1) {\r\n                this.$alert('考勤成功！', '', {\r\n                  confirmButtonText: '确定',\r\n                  type: 'success'\r\n                });\r\n                this.reload();    //调用刷新\r\n              } else {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"已考勤！\",\r\n                });\r\n              }\r\n            })\r\n            .catch(() => {\r\n              this.$message({\r\n                type: \"error\",\r\n                message: \"考勤失败！请重试！\",\r\n              });\r\n            });\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#stuAttendance{\r\n  width: 90%;\r\n  margin-left: 15px;\r\n  margin-bottom: 50px;\r\n}\r\n.time{\r\n  height: 40px;\r\n  margin-top: 8px;\r\n  font-size: 18px;\r\n}\r\n.success{\r\n  float: right;\r\n  margin-right: 120px;\r\n  font-size: 17px;\r\n  color: rgba(50,180,0,0.9);\r\n  border: 1px solid rgba(0,255,0,0.1);\r\n  border-radius: 5px;\r\n  padding: 6px 8px;\r\n  background: rgba(0,200,0,0.08);\r\n}\r\n\r\n.danger{\r\n  float: right;\r\n  margin-right: 120px;\r\n  font-size: 17px;\r\n  color: red;\r\n  border: 1px solid rgba(255,0,0,0.1);\r\n  border-radius: 5px;\r\n  padding: 6px 8px;\r\n  background: rgba(255,0,0,0.06);\r\n}\r\n.normal{\r\n  float: right;\r\n  margin-right: 120px;\r\n  font-size: 17px;\r\n  color: rgba(24,207,201,1);\r\n  border: 1px solid rgba(24,207,201,0.1);\r\n  border-radius: 5px;\r\n  padding: 6px 8px;\r\n  background: rgba(24,207,201,0.06);\r\n}\r\n\r\n</style>"]}]}
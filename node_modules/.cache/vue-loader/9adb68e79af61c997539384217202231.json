{"remainingRequest":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\src\\components\\Register.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\src\\components\\Register.vue","mtime":1639462211343},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\css-loader\\dist\\cjs.js","mtime":1636890494000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1636890500000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\postcss-loader\\src\\index.js","mtime":1636890498000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636890494000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1636890500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoucmVnaXN0ZXJfYmFja2dyb3VuZCB7DQogIC8qIHdpZHRoOiAxMDAlOyAqLw0KICAvKiBoZWlnaHQ6IDEwMCU7ICovDQogIHotaW5kZXg6IC0xOw0KICAvKiBwb3NpdGlvbjogYWJzb2x1dGU7ICovDQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMTAwJTsNCiAgdG9wOiAwcHg7DQogIGxlZnQ6IDBweDsNCn0NCg0KLnJlZ2lzdGVyX2JveCB7DQogIGJhY2tncm91bmQtY29sb3I6ICM0MTQ3NDk7DQogIG9wYWNpdHk6IDAuOTsNCiAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICB3aWR0aDogNTAlOw0KICBtYXJnaW4tbGVmdDogMjUlOw0KfQ0KLnJlZ2lzdGVyX2Zvcm0gew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOw0KICB3aWR0aDogMTAwJTsNCiAgcGFkZGluZzogMTBweCAxMHB4Ow0KICBwYWRkaW5nLXRvcDogMzBweDsNCiAgbWFyZ2luLWJvdHRvbTogMTBweDsNCiAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICBhbGlnbi1zZWxmOiBjZW50ZXI7DQogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQp9DQoucG9zIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBwYWRkaW5nOiAxMHB4Ow0KfQ0K"},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"register_background\">\r\n      <img\r\n        :src=\"imgSrc\"\r\n        style=\"width: 100%; height: 100%; display: block\"\r\n        alt=\"\"\r\n      />\r\n    </div>\r\n    <div style=\"height: 120px\"></div>\r\n    <el-card>\r\n      <div class=\"register_box\">\r\n        <el-form\r\n          ref=\"registerForm\"\r\n          :model=\"registerForm\"\r\n          :rules=\"registerFormRules\"\r\n          label-width=\"80px\"\r\n          size=\"medium\"\r\n          class=\"register_form\"\r\n        >\r\n          <!-- 账号 -->\r\n          <el-form-item prop=\"userid\" label=\"账号\">\r\n            <el-input\r\n              v-model=\"registerForm.userid\"\r\n              prefix-icon=\"el-icon-user\"\r\n              placeholder=\"请输入工号/学号\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <!-- 密码 -->\r\n          <el-form-item prop=\"password\" label=\"密码\">\r\n            <el-input\r\n              v-model=\"registerForm.password\"\r\n              prefix-icon=\"el-icon-lock\"\r\n              type=\"password\"\r\n              show-password\r\n              placeholder=\"请输入6-15位包含字母和数字的密码\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <!-- 确认密码 -->\r\n          <el-form-item prop=\"rePassword\" label=\"确认密码\">\r\n            <el-input\r\n              v-model=\"registerForm.rePassword\"\r\n              prefix-icon=\"el-icon-lock\"\r\n              type=\"password\"\r\n              class=\"length\"\r\n              show-password\r\n              placeholder=\"请再次输入密码\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <!-- 邮箱 -->\r\n          <el-form-item\r\n            prop=\"email\"\r\n            label=\"邮箱\"\r\n            style=\"width: 100%; white-space: nowrap\"\r\n            :inline=\"false\"\r\n          >\r\n            <el-input\r\n              v-model=\"registerForm.email\"\r\n              prefix-icon=\"el-icon-message\"\r\n              style=\"width: 55%\"\r\n              placeholder=\"请输入邮箱\"\r\n            ></el-input>\r\n            <!-- 发送验证码 -->\r\n            <el-button @click=\"getCode()\" style=\"width: 40%; float: right\">\r\n              <!-- <el-button\r\n                  @click=\"getCode()\"\r\n                  :disabled=\"!show\"\r\n                  style=\"width: 40%; float: right\"\r\n                > -->\r\n              <span>发送邮箱验证码</span>\r\n              <!-- <span v-show=\"show\">发送邮箱验证码</span> -->\r\n              <!-- <span v-show=\"!show\" class=\"count\"\r\n                    >{{ count }} s后可点击重发</span\r\n                  > -->\r\n            </el-button>\r\n          </el-form-item>\r\n          <!-- 校验验证码 -->\r\n          <el-form-item prop=\"code\" label=\"验证码\">\r\n            <el-input\r\n              v-model=\"registerForm.code\"\r\n              prefix-icon=\"el-icon-chat-round\"\r\n              placeholder=\"请输入验证码\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <!-- 按钮区域 -->\r\n          <el-form-item style=\"margin-right=0;width:100%\" align=\"right\">\r\n            <!-- class=\"btns\" -->\r\n            <el-button type=\"text\" @click=\"toregister\"\r\n              >已有账号，去登录</el-button\r\n            >\r\n            <el-button type=\"primary\" @click=\"register('registerForm')\"\r\n              >注册</el-button\r\n            >\r\n            <el-button type=\"info\" @click=\"resetregisterForm\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </el-card>\r\n    <div style=\"height: 100px\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nconst TIME_COUNT = 60; // 设置一个全局的倒计时的时间\r\nexport default {\r\n  data() {\r\n    //在data里面定义两个校验器,检验两次密码是否一致\r\n    var validatePass = (rule, value, callback) => {\r\n      if (value !== this.registerForm.password) {\r\n        callback(new Error(\"两次输入密码不一致!\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      count: 0,\r\n      //这是注册表单的数据绑定对象\r\n      registerForm: {\r\n        userid: \"\",\r\n        password: \"\",\r\n        rePassword: \"\",\r\n        email: \"\",\r\n        code: \"\",\r\n      },\r\n      //这是表单的验证规则对象\r\n      registerFormRules: {\r\n        //验证账号是否合法\r\n        userid: [\r\n          { required: true, message: \"请输入账号\", trigger: \"blur\" },\r\n          {\r\n            min: 6,\r\n            max: 7,\r\n            message: \"长度在 6 到 7 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            validator: function (rule, value, callback) {\r\n              if (/(^\\d{6,7}$)/.test(value) == false) {\r\n                callback(new Error(\"请输入正确的账号\"));\r\n              } else {\r\n                //校验通过\r\n                callback();\r\n              }\r\n            },\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        //验证验证码是否合法\r\n        code: [{ required: true, message: \"请输入验证码\", trigger: \"blur\" }],\r\n        //验证邮箱是否合法\r\n        email: [\r\n          { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n          {\r\n            min: 1,\r\n            max: 20,\r\n            message: \"长度在 1 到 20 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            validator: function (rule, value, callback) {\r\n              //校验数字的正则：^[0-9]*$\r\n              if (\r\n                /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/.test(\r\n                  value\r\n                ) == false\r\n              ) {\r\n                callback(new Error(\"请输入正确的邮箱\"));\r\n              } else {\r\n                //校验通过\r\n                callback();\r\n              }\r\n            },\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        //验证密码是否合法\r\n        password: [\r\n          { required: true, message: \"请输入登录密码\", trigger: \"blur\" },\r\n          {\r\n            min: 6,\r\n            max: 15,\r\n            message: \"长度在 6 到 15 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            validator: function (rule, value, callback) {\r\n              //校验密码的正则: ^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,15}$\r\n              if (\r\n                /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,18}$/.test(value) ==\r\n                false\r\n              ) {\r\n                callback(\r\n                  new Error(\"请输入包含字母和数字的组合，不能使用特殊字符\")\r\n                );\r\n              } else {\r\n                //校验通过\r\n                callback();\r\n              }\r\n            },\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        //确认密码是否正确\r\n        rePassword: [\r\n          { required: true, message: \"请再次确认密码\", trigger: \"blur\" },\r\n          {\r\n            min: 6,\r\n            max: 15,\r\n            message: \"长度在 6 到 15 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n          { validator: validatePass, trigger: \"blur\" },\r\n        ],\r\n      },\r\n      passwordType: \"password\",\r\n      imgSrc: require(\"../assets/ga.jpg\"),\r\n      radio: \"1\",\r\n      show: true,\r\n    };\r\n  },\r\n  methods: {\r\n    //跳转到登录界面\r\n    toregister() {\r\n      this.$router.push(\"/\");\r\n    },\r\n    //点击重置按钮，重置登录\r\n    resetregisterForm() {\r\n      this.$refs.registerForm.resetFields();\r\n    },\r\n    //向邮箱发送验证码\r\n    getCode() {\r\n      // console.log(\"eess6@163.com\");\r\n      if (this.registerForm.email === \"\") {\r\n        this.$message.error(\"请先输入邮箱再点击获取验证码\");\r\n      } else {\r\n        let regemail = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\r\n        if (!regemail.test(this.registerForm.email)) {\r\n          this.$message({\r\n            showClose: true,\r\n            message: \"请输入格式正确有效的邮箱号!\",\r\n            type: \"error\",\r\n          });\r\n        } else {\r\n          console.log(\"经过检验格式正确\"); //已执行\r\n          let data = new FormData();\r\n          data.append(\"account_ID\", this.registerForm.userid);\r\n          data.append(\"email\", this.registerForm.email);\r\n          this.$axios({\r\n            url: \"/account/sendEmail\",\r\n            method: \"post\",\r\n            data: data,\r\n          })\r\n            .then((response) => {\r\n              console.log(response.data);\r\n              if (response.data === 1) {\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"发送成功！\",\r\n                });\r\n              } else if (response.data === -1) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"学号或工号已注册！请重试\",\r\n                });\r\n              } else if (response.data === -2) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"学号或工号不存在！请重试\",\r\n                });\r\n              } else {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"发送失败！请重试\",\r\n                });\r\n              }\r\n            })\r\n            .catch(() => {\r\n              this.$message({\r\n                type: \"error\",\r\n                message: \"发送失败！请重试\",\r\n              });\r\n            });\r\n        }\r\n      }\r\n      console.log(\"55555\"); //执行\r\n      // 验证码倒计时\r\n      if (!this.timer) {\r\n        this.count = TIME_COUNT;\r\n        this.show = false;\r\n        this.timer = setInterval(() => {\r\n          if (this.count > 0 && this.count <= TIME_COUNT) {\r\n            this.count--;\r\n          } else {\r\n            this.show = true;\r\n            clearInterval(this.timer);\r\n            this.timer = null;\r\n          }\r\n        }, 1000);\r\n      }\r\n    },\r\n    //注册功能\r\n    register(registerForm) {\r\n      this.$refs[registerForm].validate((valid, wrongstring) => {\r\n        // 获取registerForm的实例（el-form），找到validate方法，根据验证规则rules校验是否valid\r\n        if (valid) {\r\n          let data = new FormData();\r\n          data.append(\"account_ID\", this.registerForm.userid);\r\n          data.append(\"password\", this.registerForm.password);\r\n          data.append(\"email\", this.registerForm.email);\r\n          data.append(\"code\", this.registerForm.code);\r\n          this.$axios({\r\n            url: \"/account/register\",\r\n            method: \"post\",\r\n            data: data,\r\n          })\r\n            .then((response) => {\r\n              if (response.data === 1) {\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"注册成功！\",\r\n                });\r\n              } else {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"填写信息错误！请重试\",\r\n                });\r\n              }\r\n            })\r\n            .catch(() => {\r\n              this.$message({\r\n                type: \"error\",\r\n                message: \"注册失败！请重试\",\r\n              });\r\n            });\r\n        } else {\r\n          console.log(valid, wrongstring);\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.register_background {\r\n  /* width: 100%; */\r\n  /* height: 100%; */\r\n  z-index: -1;\r\n  /* position: absolute; */\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 100%;\r\n  top: 0px;\r\n  left: 0px;\r\n}\r\n\r\n.register_box {\r\n  background-color: #414749;\r\n  opacity: 0.9;\r\n  border-radius: 5px;\r\n  width: 50%;\r\n  margin-left: 25%;\r\n}\r\n.register_form {\r\n  background-color: #ffffff;\r\n  width: 100%;\r\n  padding: 10px 10px;\r\n  padding-top: 30px;\r\n  margin-bottom: 10px;\r\n  border-radius: 5px;\r\n  align-self: center;\r\n  box-sizing: border-box;\r\n}\r\n.pos {\r\n  position: absolute;\r\n  padding: 10px;\r\n}\r\n</style>"]}]}
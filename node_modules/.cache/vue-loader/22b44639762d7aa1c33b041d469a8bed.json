{"remainingRequest":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\src\\components\\star_sky.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\src\\components\\star_sky.vue","mtime":1638584424463},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636890494000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\babel-loader\\lib\\index.js","mtime":1636890492000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636890494000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1636890500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiB7DQogICAgcG9pbnQ6IHsNCiAgICAgIHR5cGU6IE51bWJlciwNCiAgICAgIGRlZmF1bHQ6IDI1IC8vIOeUn+aIkOeahOaYn+aYn++8iOeCue+8ieeahOS4quaVsCwg6buY6K6kMjXkuKoNCiAgICB9LA0KICAgIGxpbmVDb2xvcjogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJ3JnYmEoNDUsMTQwLDIxMCwwLjIpJyAvLyDnur/nmoTpopzoibINCiAgICB9LA0KICAgIHJvdW5kQ29sb3I6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDQ1LDE0MCwyMTAsMC4xKScgLy8g5pif5pif55qE6aKc6ImyDQogICAgfSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZG9jV2lkdGg6IDAsIC8vIOeUu+W4g+WuvQ0KICAgICAgZG9jSGVpZ2h0OiAwLCAvLyDnlLvluIPpq5gNCiAgICAgIGNvbnRleHQ6IG51bGwsIC8vIGNhbnZhc0RvbeeahOaJp+ihjOS4iuS4i+aWhw0KICAgICAgY2lyY2xlQXJyOiBbXSwgLy8g5ZyG54K55pWw57uEDQogICAgICB0aW1lcjogbnVsbCwgLy8g5a6a5pe25Zmo5a+56LGhDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIGNvbnN0IGNhbnZhc0RvbSA9IHRoaXMuJHJlZnMuY2FudmFzDQoNCiAgICAvLyDlj5bnlLvluIPnmoTpq5jlrr3mnaXorr7nva7mmL7npLrliIbovqjnjocNCiAgICB0aGlzLmRvY1dpZHRoID0gY2FudmFzRG9tLm9mZnNldFdpZHRoDQogICAgdGhpcy5kb2NIZWlnaHQgPSBjYW52YXNEb20ub2Zmc2V0SGVpZ2h0DQoNCiAgICAvLyDorr7nva7nlLvluIPliIbovqjnjocNCiAgICBjYW52YXNEb20ud2lkdGggPSBjYW52YXNEb20ub2Zmc2V0V2lkdGgNCiAgICBjYW52YXNEb20uaGVpZ2h0ID0gY2FudmFzRG9tLm9mZnNldEhlaWdodA0KDQogICAgLy8g5Yid5aeL5YyWY2FudmFz5LiK5LiL5paHDQogICAgdGhpcy5jb250ZXh0ID0gY2FudmFzRG9tLmdldENvbnRleHQoJzJkJykNCg0KICAgIC8vIOiuvue9rue6v+adoeWSjOaYn+aYn+minOiJsg0KICAgIHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IHRoaXMubGluZUNvbG9yOw0KICAgIHRoaXMuY29udGV4dC5saW5lV2lkdGggPSAxOw0KICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnJvdW5kQ29sb3I7DQoNCiAgICAvLyDliJ3lp4vljJYNCiAgICB0aGlzLmNyZWF0ZUNpcmNsZUFycigpICAgICAgIC8vIOiuvue9ruaYn+aYn+aVsOe7hA0KICAgIHRoaXMuZHJhdygpIC8vIOmmluWxj+e7mOWItg0KICAgIHRoaXMuY3ljbGVEcmF3KCkgLy8g5b6q546v57uY5Yi2DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvKioNCiAgICAgKiDnlJ/miJBtaW7lkoxtYXjkuYvpl7Tpmo/mnLrmlbANCiAgICAgKi8NCiAgICByYW5nZVJhZG9tKG1heCwgbWluKSB7DQogICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluKQ0KICAgIH0sDQogICAgLyoqDQogICAgICog57uY5Yi25Y6f54K5DQogICAgICovDQogICAgZHJhd0NpcmNsZShjb250ZXh0LCB4LCB5LCByLCBtb3ZlWCwgbW92ZVkpIHsNCiAgICAgIGxldCBjaXJjbGUgPSB7DQogICAgICAgIHgsDQogICAgICAgIHksDQogICAgICAgIHIsDQogICAgICAgIG1vdmVYLA0KICAgICAgICBtb3ZlWSwNCiAgICAgIH0NCiAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCkNCiAgICAgIGNvbnRleHQuYXJjKGNpcmNsZS54LCBjaXJjbGUueSwgY2lyY2xlLnIsIDAsIDIgKiBNYXRoLlBJKQ0KICAgICAgY29udGV4dC5jbG9zZVBhdGgoKQ0KICAgICAgY29udGV4dC5maWxsKCkNCiAgICAgIHJldHVybiBjaXJjbGUNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOe7mOWItue6v+adoQ0KICAgICAqLw0KICAgIGRyYXdMaW5lKGNvbnRleHQsIGJlZ2luWCwgYmVnaW5ZLCBjbG9zZVgsIGNsb3NlWSwgb3BhY2l0eSkgew0KICAgICAgY29udGV4dC5iZWdpblBhdGgoKQ0KICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGByZ2JhKDAsIDAsIDAsICR7b3BhY2l0eX0pYA0KICAgICAgY29udGV4dC5tb3ZlVG8oYmVnaW5YLCBiZWdpblkpDQogICAgICBjb250ZXh0LmxpbmVUbyhjbG9zZVgsIGNsb3NlWSkNCiAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCkNCiAgICAgIGNvbnRleHQuc3Ryb2tlKCkNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOeUn+aIkOWchueCueaVsOe7hA0KICAgICAqLw0KICAgIGNyZWF0ZUNpcmNsZUFycigpIHsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wb2ludDsgaSsrKSB7DQogICAgICAgIHRoaXMuY2lyY2xlQXJyLnB1c2godGhpcy5kcmF3Q2lyY2xlKA0KICAgICAgICAgICAgdGhpcy5jb250ZXh0LA0KICAgICAgICAgICAgdGhpcy5yYW5nZVJhZG9tKHRoaXMuZG9jV2lkdGgsIDApLA0KICAgICAgICAgICAgdGhpcy5yYW5nZVJhZG9tKHRoaXMuZG9jSGVpZ2h0LCAwKSwNCiAgICAgICAgICAgIHRoaXMucmFuZ2VSYWRvbSgxNSwgMiksDQogICAgICAgICAgICB0aGlzLnJhbmdlUmFkb20oMTAsIC0xMCkvNDAsDQogICAgICAgICAgICB0aGlzLnJhbmdlUmFkb20oMTAsIC0xMCkvNDANCiAgICAgICAgKSkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOavj+S4gOW4p+e7mOWItg0KICAgICAqLw0KICAgIGRyYXcoKSB7DQogICAgICBjb25zdCBjaXJjbGVBcnIgPSB0aGlzLmNpcmNsZUFycg0KICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmRvY1dpZHRoLCB0aGlzLmRvY0hlaWdodCkNCiAgICAgIC8vIOW+queOr+e7mOWItueCuQ0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBvaW50OyBpKyspIHsNCiAgICAgICAgdGhpcy5kcmF3Q2lyY2xlKHRoaXMuY29udGV4dCwgY2lyY2xlQXJyW2ldLngsIGNpcmNsZUFycltpXS55LCBjaXJjbGVBcnJbaV0ucikNCiAgICAgIH0NCiAgICAgIC8vIOW+queOr+e7mOWItue6vw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBvaW50OyBpKyspIHsNCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnBvaW50OyBqKyspIHsNCiAgICAgICAgICBpZiAoaSArIGogPCB0aGlzLnBvaW50KSB7DQogICAgICAgICAgICBsZXQgQSA9IE1hdGguYWJzKGNpcmNsZUFycltpICsgal0ueCAtIGNpcmNsZUFycltpXS54KQ0KICAgICAgICAgICAgbGV0IEIgPSBNYXRoLmFicyhjaXJjbGVBcnJbaSArIGpdLnkgLSBjaXJjbGVBcnJbaV0ueSkNCiAgICAgICAgICAgIGxldCBsaW5lTGVuZ3RoID0gTWF0aC5zcXJ0KEEgKiBBICsgQiAqIEIpDQogICAgICAgICAgICBsZXQgQyA9IDEgLyBsaW5lTGVuZ3RoICogNyAtIDAuMDA5DQogICAgICAgICAgICBsZXQgbGluZU9wYWNpdHkgPSBDID4gMC4wMyA/IDAuMDMgOiBDOw0KICAgICAgICAgICAgaWYgKGxpbmVPcGFjaXR5ID4gMCkgew0KICAgICAgICAgICAgICB0aGlzLmRyYXdMaW5lKA0KICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LA0KICAgICAgICAgICAgICAgICAgY2lyY2xlQXJyW2ldLngsDQogICAgICAgICAgICAgICAgICBjaXJjbGVBcnJbaV0ueSwNCiAgICAgICAgICAgICAgICAgIGNpcmNsZUFycltpICsgal0ueCwNCiAgICAgICAgICAgICAgICAgIGNpcmNsZUFycltpICsgal0ueSwNCiAgICAgICAgICAgICAgICAgIGxpbmVPcGFjaXR5LA0KICAgICAgICAgICAgICApDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDlvqrnjq/nu5jliLYNCiAgICAgKi8NCiAgICBjeWNsZURyYXcoKSB7DQogICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5wb2ludDsgaSsrKSB7DQogICAgICAgICAgbGV0IGNpciA9IHRoaXMuY2lyY2xlQXJyW2ldDQogICAgICAgICAgY2lyLnggKz0gY2lyLm1vdmVYDQogICAgICAgICAgY2lyLnkgKz0gY2lyLm1vdmVZDQogICAgICAgICAgaWYgKGNpci54ID4gdGhpcy5kb2NXaWR0aCkgew0KICAgICAgICAgICAgY2lyLnggPSAwDQogICAgICAgICAgfSBlbHNlIGlmIChjaXIueCA8IDApIHsNCiAgICAgICAgICAgIGNpci54ID0gdGhpcy5kb2NXaWR0aA0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoY2lyLnkgPiB0aGlzLmRvY0hlaWdodCkgew0KICAgICAgICAgICAgY2lyLnkgPSAwDQogICAgICAgICAgfSBlbHNlIGlmIChjaXIueSA8IDApIHsNCiAgICAgICAgICAgIGNpci55ID0gdGhpcy5kb2NIZWlnaHQNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5kcmF3KCkNCiAgICAgIH0sIDEwKQ0KICAgIH0sDQogIH0sDQogIGJlZm9yZURlc3RvcnkoKSB7DQogICAgLy8g6K6w5b6X5pGn5q+B5a6a5pe25ZmoDQogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKQ0KICB9DQp9DQo="},{"version":3,"sources":["star_sky.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"star_sky.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"starry-sky\">\r\n    <canvas ref=\"canvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    point: {\r\n      type: Number,\r\n      default: 25 // 生成的星星（点）的个数, 默认25个\r\n    },\r\n    lineColor: {\r\n      type: String,\r\n      default: 'rgba(45,140,210,0.2)' // 线的颜色\r\n    },\r\n    roundColor: {\r\n      type: String,\r\n      default: 'rgba(45,140,210,0.1)' // 星星的颜色\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      docWidth: 0, // 画布宽\r\n      docHeight: 0, // 画布高\r\n      context: null, // canvasDom的执行上下文\r\n      circleArr: [], // 圆点数组\r\n      timer: null, // 定时器对象\r\n    }\r\n  },\r\n  mounted() {\r\n    const canvasDom = this.$refs.canvas\r\n\r\n    // 取画布的高宽来设置显示分辨率\r\n    this.docWidth = canvasDom.offsetWidth\r\n    this.docHeight = canvasDom.offsetHeight\r\n\r\n    // 设置画布分辨率\r\n    canvasDom.width = canvasDom.offsetWidth\r\n    canvasDom.height = canvasDom.offsetHeight\r\n\r\n    // 初始化canvas上下文\r\n    this.context = canvasDom.getContext('2d')\r\n\r\n    // 设置线条和星星颜色\r\n    this.context.strokeStyle = this.lineColor;\r\n    this.context.lineWidth = 1;\r\n    this.context.fillStyle = this.roundColor;\r\n\r\n    // 初始化\r\n    this.createCircleArr()       // 设置星星数组\r\n    this.draw() // 首屏绘制\r\n    this.cycleDraw() // 循环绘制\r\n  },\r\n  methods: {\r\n    /**\r\n     * 生成min和max之间随机数\r\n     */\r\n    rangeRadom(max, min) {\r\n      return Math.floor(Math.random() * (max - min + 1) + min)\r\n    },\r\n    /**\r\n     * 绘制原点\r\n     */\r\n    drawCircle(context, x, y, r, moveX, moveY) {\r\n      let circle = {\r\n        x,\r\n        y,\r\n        r,\r\n        moveX,\r\n        moveY,\r\n      }\r\n      context.beginPath()\r\n      context.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI)\r\n      context.closePath()\r\n      context.fill()\r\n      return circle\r\n    },\r\n    /**\r\n     * 绘制线条\r\n     */\r\n    drawLine(context, beginX, beginY, closeX, closeY, opacity) {\r\n      context.beginPath()\r\n      context.strokeStyle = `rgba(0, 0, 0, ${opacity})`\r\n      context.moveTo(beginX, beginY)\r\n      context.lineTo(closeX, closeY)\r\n      context.closePath()\r\n      context.stroke()\r\n    },\r\n    /**\r\n     * 生成圆点数组\r\n     */\r\n    createCircleArr() {\r\n      for (let i = 0; i < this.point; i++) {\r\n        this.circleArr.push(this.drawCircle(\r\n            this.context,\r\n            this.rangeRadom(this.docWidth, 0),\r\n            this.rangeRadom(this.docHeight, 0),\r\n            this.rangeRadom(15, 2),\r\n            this.rangeRadom(10, -10)/40,\r\n            this.rangeRadom(10, -10)/40\r\n        ))\r\n      }\r\n    },\r\n    /**\r\n     * 每一帧绘制\r\n     */\r\n    draw() {\r\n      const circleArr = this.circleArr\r\n      this.context.clearRect(0, 0, this.docWidth, this.docHeight)\r\n      // 循环绘制点\r\n      for (let i = 0; i < this.point; i++) {\r\n        this.drawCircle(this.context, circleArr[i].x, circleArr[i].y, circleArr[i].r)\r\n      }\r\n      // 循环绘制线\r\n      for (let i = 0; i < this.point; i++) {\r\n        for (let j = 0; j < this.point; j++) {\r\n          if (i + j < this.point) {\r\n            let A = Math.abs(circleArr[i + j].x - circleArr[i].x)\r\n            let B = Math.abs(circleArr[i + j].y - circleArr[i].y)\r\n            let lineLength = Math.sqrt(A * A + B * B)\r\n            let C = 1 / lineLength * 7 - 0.009\r\n            let lineOpacity = C > 0.03 ? 0.03 : C;\r\n            if (lineOpacity > 0) {\r\n              this.drawLine(\r\n                  this.context,\r\n                  circleArr[i].x,\r\n                  circleArr[i].y,\r\n                  circleArr[i + j].x,\r\n                  circleArr[i + j].y,\r\n                  lineOpacity,\r\n              )\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * 循环绘制\r\n     */\r\n    cycleDraw() {\r\n      this.timer = setInterval(() => {\r\n        for(let i = 0; i < this.point; i++) {\r\n          let cir = this.circleArr[i]\r\n          cir.x += cir.moveX\r\n          cir.y += cir.moveY\r\n          if (cir.x > this.docWidth) {\r\n            cir.x = 0\r\n          } else if (cir.x < 0) {\r\n            cir.x = this.docWidth\r\n          }\r\n          if (cir.y > this.docHeight) {\r\n            cir.y = 0\r\n          } else if (cir.y < 0) {\r\n            cir.y = this.docHeight\r\n          }\r\n        }\r\n        this.draw()\r\n      }, 10)\r\n    },\r\n  },\r\n  beforeDestory() {\r\n    // 记得摧毁定时器\r\n    clearInterval(this.timer)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.starry-sky {\r\n  width 100%\r\n  height 100%\r\n  > canvas {\r\n    width 100%\r\n    height 100%\r\n  }\r\n}\r\n</style>"]}]}
{"remainingRequest":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\src\\components\\teacherPages\\task\\ManageTask.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\src\\components\\teacherPages\\task\\ManageTask.vue","mtime":1639117310850},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636890494000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\babel-loader\\lib\\index.js","mtime":1636890492000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636890494000},{"path":"D:\\Code_Files\\WebStorm_Files\\ExperimentTeachingSystem\\node_modules\\vue-loader\\lib\\index.js","mtime":1636890500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJNYW5hZ2VUYXNrIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy/lrp7pqozpobnnm67lr7nor53moYbkv6Hmga8NCiAgICAgIHByb2plY3REaWFsb2dWaXNpYmxlOiBmYWxzZSwgLy/lr7nor53moYbmmK/lkKblj6/op4ENCiAgICAgIHByb2plY3REYXRhOiBuZXcgRm9ybURhdGEoKSwgLy/ooajljZXmj5DkuqTnmoTmlbDmja4NCiAgICAgIHByb2plY3RJbmZvOiB7DQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICBkZXNjcmlwdGlvbjogIiIsDQogICAgICAgIHRpbWU6ICIiLA0KICAgICAgICBwYXRoX251bWJlcjogMCwNCiAgICAgICAgZmlsZUxpc3Q6IFtdLA0KICAgICAgfSwNCiAgICAgIHByb2plY3RSdWxlczogew0KICAgICAgICAvL+WunumqjOmhueebruihqOWNlemqjOivgeinhOWImQ0KICAgICAgICBuYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+Whq+WGmemhueebruWQjeensCIsIHRyaWdnZXI6ICJibHVyIiB9XSwNCiAgICAgICAgdGltZTpbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqemhueebruacieaViOaXtumXtCIsIHRyaWdnZXI6ICJibHVyIiB9XSwNCiAgICAgICAgZGVzY3JpcHRpb246IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+35aGr5YaZ6aG555uu5o+P6L+wIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgIF0sDQogICAgICB9LA0KDQogICAgICAvL+iAg+WLpOWvueivneahhuS/oeaBrw0KICAgICAgYXR0ZW5kYW5jZURpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgYXR0ZW5kYW5jZVRpbWU6IG51bGwsDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGhhbmRsZUNsaWNrKHRhYikgew0KICAgICAgaWYgKHRhYi5pbmRleCA9PSAwKSB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJ0YXNrcyIgfSk7DQogICAgICBlbHNlIGlmICh0YWIuaW5kZXggPT0gMSkgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAicHJvamVjdHMiIH0pOw0KICAgICAgZWxzZSBpZiAodGFiLmluZGV4ID09IDIpIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogImF0dGVuZGFuY2VzIiB9KTsNCiAgICB9LA0KDQogICAgLy/mlofku7bliJfooajmlLnlj5gNCiAgICBoYW5kbGVDaGFuZ2UoZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIHRoaXMucHJvamVjdEluZm8uZmlsZUxpc3QgPSBmaWxlTGlzdDsNCiAgICB9LA0KDQogICAgLy/mlofku7bliJfooajnp7vpmaTmlofku7YNCiAgICBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIHRoaXMucHJvamVjdEluZm8uZmlsZUxpc3QgPSBmaWxlTGlzdDsNCiAgICB9LA0KDQogICAgLy/mlofku7botoXlh7rlj6/pgInojIPlm7QNCiAgICBoYW5kbGVFeGNlZWQoZmlsZXMsIGZpbGVMaXN0KSB7DQogICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoDQogICAgICAgIGDlvZPliY3pmZDliLbpgInmi6kgMyDkuKrmlofku7bvvIzmnKzmrKHpgInmi6nkuoYgJHtmaWxlcy5sZW5ndGh9IOS4quaWh+S7tu+8jOWFsemAieaLqeS6hiAkew0KICAgICAgICAgIGZpbGVzLmxlbmd0aCArIGZpbGVMaXN0Lmxlbmd0aA0KICAgICAgICB9IOS4quaWh+S7tmANCiAgICAgICk7DQogICAgfSwNCg0KICAgIC8v6YeN5YaZZWwtdXBsb2Fk55qE5LiK5Lyg5paH5Lu25pa55rOV77yM5bCG5paH5Lu25re75Yqg5YiwRm9ybURhdGHkuK3vvIzlvoXkuIrkvKANCiAgICB1cGxvYWRQcm9qZWN0RmlsZShmaWxlKSB7DQogICAgICB0aGlzLnByb2plY3REYXRhLmFwcGVuZCgiZmlsZSIsIGZpbGUuZmlsZSk7DQogICAgfSwNCg0KICAgIC8v6YeN572u6KGo5Y2VDQogICAgcmVzZXRQcm9qZWN0KCkgew0KICAgICAgdGhpcy4kcmVmcy5Qcm9qZWN0SW5mby5yZXNldEZpZWxkcygpOw0KICAgICAgdGhpcy5wcm9qZWN0SW5mby5maWxlTGlzdCA9IFtdOw0KICAgIH0sDQoNCiAgICAvL+aPkOS6pOWunumqjOmhueebruS/oeaBrw0KICAgIHN1Ym1pdFByb2plY3QoKSB7DQogICAgICB0aGlzLiRyZWZzLlByb2plY3RJbmZvLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICAvL+a3u+WKoOaWh+S7tuWIl+ihqA0KICAgICAgICAgIHRoaXMuJHJlZnNbInByb2plY3RVcGxvYWRGaWxlIl0uc3VibWl0KCk7DQogICAgICAgICAgLy/mt7vliqDpobnnm67mj4/ov7Dkv6Hmga8NCiAgICAgICAgICB0aGlzLnByb2plY3REYXRhLmFwcGVuZCgiY291cnNlX0lEIiwgdGhpcy4kcm91dGUucGFyYW1zLmNvdXJzZV9pZCk7DQogICAgICAgICAgdGhpcy5wcm9qZWN0RGF0YS5hcHBlbmQoIm5hbWUiLCB0aGlzLnByb2plY3RJbmZvLm5hbWUpOw0KICAgICAgICAgIHRoaXMucHJvamVjdERhdGEuYXBwZW5kKCJkZXNjcmlwdGlvbiIsIHRoaXMucHJvamVjdEluZm8uZGVzY3JpcHRpb24pOw0KICAgICAgICAgIHRoaXMucHJvamVjdERhdGEuYXBwZW5kKCJzdGFydF90aW1lIiwgdGhpcy5wcm9qZWN0SW5mby50aW1lWzBdKTsNCiAgICAgICAgICB0aGlzLnByb2plY3REYXRhLmFwcGVuZCgiZW5kX3RpbWUiLCB0aGlzLnByb2plY3RJbmZvLnRpbWVbMV0pOw0KICAgICAgICAgIHRoaXMucHJvamVjdERhdGEuYXBwZW5kKA0KICAgICAgICAgICAgInBhdGhfbnVtYmVyIiwNCiAgICAgICAgICAgIHRoaXMucHJvamVjdEluZm8uZmlsZUxpc3QubGVuZ3RoLnRvU3RyaW5nKCkNCiAgICAgICAgICApOw0KICAgICAgICAgIHRoaXMucHJvamVjdERhdGEuYXBwZW5kKCJ0ZWFjaGVyX0lEIiwgIjEwMTAwIik7DQogICAgICAgICAgLy/mlofku7blkozpobnnm67kv6Hmga/kuIDotbfmj5DkuqQNCiAgICAgICAgICB0aGlzLiRheGlvcyh7DQogICAgICAgICAgICB1cmw6ICIvcHJvamVjdC9hZGQiLA0KICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsDQogICAgICAgICAgICBkYXRhOiB0aGlzLnByb2plY3REYXRhLA0KICAgICAgICAgIH0pDQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICAgICAgLy/lkI7nq6/mm7TmlrDmiJDlip8NCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT09IDEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLlj5HluIPmiJDlip/vvIEiLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIC8v6YeN572u6KGo5Y2VDQogICAgICAgICAgICAgICAgdGhpcy5yZXNldFByb2plY3QoKTsNCiAgICAgICAgICAgICAgICB0aGlzLnByb2plY3REaWFsb2dWaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLy/lkI7nq6/mm7TmlrDlpLHotKUNCiAgICAgICAgICAgICAgZWxzZSBpZihyZXNwb25zZS5kYXRhID09PSAtMSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLlj5HluIPlpLHotKXvvIHor7fmo4Dmn6Xlrp7pqozlkI3mmK/lkKbkuI7lvoDmnJ/lrp7pqozlkI3mnInph43lpI3vvIEiLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGVsc2UgaWYocmVzcG9uc2UuZGF0YSA9PT0gLTIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5paH5Lu25LiK5Lyg5aSx6LSl77yB6K+36YeN6K+V77yBIiwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgICAgICAgbWVzc2FnZTogIuWPkeW4g+Wksei0pe+8geivt+mHjeivle+8gSIsDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgdGhpcy5wcm9qZWN0RGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgIH0sDQoNCiAgICAvL+iwg+eUqGFwaeaPkOS6pOWhq+WGmeeahOiAg+WLpOS/oeaBrw0KICAgIHN1Ym1pdEF0dGVuZGFuY2UoKSB7DQogICAgICBsZXQgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgZGF0YS5hcHBlbmQoImNvdXJzZV9JRCIsIHRoaXMuJHJvdXRlLnBhcmFtcy5jb3Vyc2VfaWQpOw0KICAgICAgZGF0YS5hcHBlbmQoInN0YXJ0X3RpbWUiLCB0aGlzLmF0dGVuZGFuY2VUaW1lWzBdKTsNCiAgICAgIGRhdGEuYXBwZW5kKCJlbmRfdGltZSIsIHRoaXMuYXR0ZW5kYW5jZVRpbWVbMV0pOw0KICAgICAgdGhpcy4kYXhpb3Moew0KICAgICAgICB1cmw6ICIvYXR0ZW5kL2FkZEF0dGVuZGFuY2UiLA0KICAgICAgICBtZXRob2Q6ICJwb3N0IiwNCiAgICAgICAgZGF0YTogZGF0YSwNCiAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09PSAxKSB7DQogICAgICAgICAgICB0aGlzLmF0dGVuZGFuY2VUaW1lID0gbnVsbDsNCiAgICAgICAgICAgIHRoaXMuYXR0ZW5kYW5jZURpYWxvZ1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICLlj5HluIPmiJDlip/vvIEiLA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgICAgICBtZXNzYWdlOiAi5bey5Y+R5biD6L+H5q2k6ICD5Yuk77yBIiwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgICBtZXNzYWdlOiAi5Y+R5biD5aSx6LSl77yB6K+36YeN6K+V77yBIiwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["ManageTask.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ManageTask.vue","sourceRoot":"src/components/teacherPages/task","sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"height: 40px\"></div>\r\n    <div>\r\n      <el-tabs\r\n        class=\"taskTab\"\r\n        type=\"border-card\"\r\n        @tab-click=\"handleClick\"\r\n        value=\"task\"\r\n      >\r\n        <!--中间的大框框-->\r\n        <el-tab-pane label=\"发布任务\" name=\"task\">\r\n          <el-container style=\"height: 480px\">\r\n            <div class=\"typeCard\">\r\n              <!--发布实验卡片-->\r\n              <el-card\r\n                shadow=\"hover\"\r\n                @click.native=\"projectDialogVisible = true\"\r\n                style=\"cursor: pointer\"\r\n              >\r\n                <i class=\"el-icon-s-cooperation\"></i><br />\r\n                <div class=\"choice\">\r\n                  <p>发布实验项目</p>\r\n                </div>\r\n              </el-card>\r\n            </div>\r\n            <div class=\"typeCard\">\r\n              <!--发布考勤卡片-->\r\n              <el-card\r\n                shadow=\"hover\"\r\n                @click.native=\"attendanceDialogVisible = true\"\r\n                style=\"cursor: pointer\"\r\n              >\r\n                <i class=\"el-icon-user-solid\"></i><br />\r\n                <div class=\"choice\">\r\n                  <p>发布课程考勤</p>\r\n                </div>\r\n              </el-card>\r\n            </div>\r\n          </el-container>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"实验项目\" name=\"project\"> </el-tab-pane>\r\n        <el-tab-pane label=\"课程考勤\" name=\"attendance\"> </el-tab-pane>\r\n      </el-tabs>\r\n\r\n      <!--填写实验项目信息-->\r\n      <el-dialog\r\n        title=\"发布实验项目信息\"\r\n        :visible.sync=\"projectDialogVisible\"\r\n        width=\"680px\"\r\n      >\r\n        <!--实验信息表单-->\r\n        <el-form\r\n          ref=\"ProjectInfo\"\r\n          :rules=\"projectRules\"\r\n          :model=\"projectInfo\"\r\n          label-width=\"80px\"\r\n        >\r\n          <el-form-item label=\"项目名称\" prop=\"name\">\r\n            <el-input\r\n              v-model=\"projectInfo.name\"\r\n              autocomplete=\"off\"\r\n              style=\"width: 550px\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"有效时间\" required prop=\"time\">\r\n            <el-date-picker\r\n                v-model=\"projectInfo.time\"\r\n                type=\"datetimerange\"\r\n                align=\"right\"\r\n                start-placeholder=\"开始时间\"\r\n                end-placeholder=\"结束时间\"\r\n                :default-time=\"['00:00:00', '23:59:59']\"\r\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n                style=\"width: 550px\">\r\n            </el-date-picker>\r\n          </el-form-item>\r\n          <el-form-item label=\"项目描述\" prop=\"description\">\r\n            <el-input\r\n              v-model=\"projectInfo.description\"\r\n              autocomplete=\"off\"\r\n              type=\"textarea\"\r\n              :rows=\"10\"\r\n              style=\"width: 550px\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"附加文件\">\r\n            <!--上传文件区域-->\r\n            <el-upload\r\n              ref=\"projectUploadFile\"\r\n              action=\"#\"\r\n              multiple\r\n              :limit=\"3\"\r\n              :auto-upload=\"false\"\r\n              :file-list=\"projectInfo.fileList\"\r\n              :on-change=\"handleChange\"\r\n              :on-exceed=\"handleExceed\"\r\n              :http-request=\"uploadProjectFile\"\r\n            >\r\n              <el-button slot=\"trigger\" size=\"mini\" type=\"primary\"\r\n                >选取文件</el-button\r\n              >\r\n              <div slot=\"tip\" class=\"el-upload__tip\">\r\n                最多上传3个文件，且每个文件大小不超过5MB\r\n              </div>\r\n            </el-upload>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button class=\"btn_dialog\" @click=\"resetProject\">重置</el-button>\r\n          <el-button class=\"btn_dialog\" @click=\"projectDialogVisible = false\"\r\n            >暂存</el-button\r\n          >\r\n          <el-button class=\"btn_dialog\" type=\"primary\" @click=\"submitProject\"\r\n            >发布</el-button\r\n          >\r\n        </div>\r\n      </el-dialog>\r\n\r\n      <!--填写考勤信息-->\r\n      <el-dialog\r\n        title=\"发布考勤信息\"\r\n        :visible.sync=\"attendanceDialogVisible\"\r\n        width=\"520px\"\r\n        style=\"margin-top: 100px\"\r\n      >\r\n        <div>\r\n          <!--开始时间到结束时间，控件自动检测时间先后-->\r\n          <span style=\"margin-left: 20px; margin-right: 30px\">考勤时间</span>\r\n          <el-time-picker\r\n            is-range\r\n            v-model=\"attendanceTime\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始时间\"\r\n            end-placeholder=\"结束时间\"\r\n            placeholder=\"选择时间范围\"\r\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n          >\r\n          </el-time-picker>\r\n        </div>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"attendanceDialogVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitAttendance\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ManageTask\",\r\n  data() {\r\n    return {\r\n      //实验项目对话框信息\r\n      projectDialogVisible: false, //对话框是否可见\r\n      projectData: new FormData(), //表单提交的数据\r\n      projectInfo: {\r\n        name: \"\",\r\n        description: \"\",\r\n        time: \"\",\r\n        path_number: 0,\r\n        fileList: [],\r\n      },\r\n      projectRules: {\r\n        //实验项目表单验证规则\r\n        name: [{ required: true, message: \"请填写项目名称\", trigger: \"blur\" }],\r\n        time:[{ required: true, message: \"请选择项目有效时间\", trigger: \"blur\" }],\r\n        description: [\r\n          { required: true, message: \"请填写项目描述\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n\r\n      //考勤对话框信息\r\n      attendanceDialogVisible: false,\r\n      attendanceTime: null,\r\n    };\r\n  },\r\n  methods: {\r\n    handleClick(tab) {\r\n      if (tab.index == 0) this.$router.push({ name: \"tasks\" });\r\n      else if (tab.index == 1) this.$router.push({ name: \"projects\" });\r\n      else if (tab.index == 2) this.$router.push({ name: \"attendances\" });\r\n    },\r\n\r\n    //文件列表改变\r\n    handleChange(file, fileList) {\r\n      this.projectInfo.fileList = fileList;\r\n    },\r\n\r\n    //文件列表移除文件\r\n    handleRemove(file, fileList) {\r\n      this.projectInfo.fileList = fileList;\r\n    },\r\n\r\n    //文件超出可选范围\r\n    handleExceed(files, fileList) {\r\n      this.$message.warning(\r\n        `当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${\r\n          files.length + fileList.length\r\n        } 个文件`\r\n      );\r\n    },\r\n\r\n    //重写el-upload的上传文件方法，将文件添加到FormData中，待上传\r\n    uploadProjectFile(file) {\r\n      this.projectData.append(\"file\", file.file);\r\n    },\r\n\r\n    //重置表单\r\n    resetProject() {\r\n      this.$refs.ProjectInfo.resetFields();\r\n      this.projectInfo.fileList = [];\r\n    },\r\n\r\n    //提交实验项目信息\r\n    submitProject() {\r\n      this.$refs.ProjectInfo.validate((valid) => {\r\n        if (valid) {\r\n          //添加文件列表\r\n          this.$refs[\"projectUploadFile\"].submit();\r\n          //添加项目描述信息\r\n          this.projectData.append(\"course_ID\", this.$route.params.course_id);\r\n          this.projectData.append(\"name\", this.projectInfo.name);\r\n          this.projectData.append(\"description\", this.projectInfo.description);\r\n          this.projectData.append(\"start_time\", this.projectInfo.time[0]);\r\n          this.projectData.append(\"end_time\", this.projectInfo.time[1]);\r\n          this.projectData.append(\r\n            \"path_number\",\r\n            this.projectInfo.fileList.length.toString()\r\n          );\r\n          this.projectData.append(\"teacher_ID\", \"10100\");\r\n          //文件和项目信息一起提交\r\n          this.$axios({\r\n            url: \"/project/add\",\r\n            method: \"post\",\r\n            data: this.projectData,\r\n          })\r\n            .then((response) => {\r\n              //后端更新成功\r\n              if (response.data === 1) {\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"发布成功！\",\r\n                });\r\n                //重置表单\r\n                this.resetProject();\r\n                this.projectDialogVisible = false;\r\n              }\r\n              //后端更新失败\r\n              else if(response.data === -1) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"发布失败！请检查实验名是否与往期实验名有重复！\",\r\n                });\r\n              }\r\n              else if(response.data === -2) {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"文件上传失败！请重试！\",\r\n                });\r\n              }\r\n            })\r\n            .catch(() => {\r\n              this.$message({\r\n                type: \"error\",\r\n                message: \"发布失败！请重试！\",\r\n              });\r\n            });\r\n        }\r\n      });\r\n      this.projectData = new FormData();\r\n    },\r\n\r\n    //调用api提交填写的考勤信息\r\n    submitAttendance() {\r\n      let data = new FormData();\r\n      data.append(\"course_ID\", this.$route.params.course_id);\r\n      data.append(\"start_time\", this.attendanceTime[0]);\r\n      data.append(\"end_time\", this.attendanceTime[1]);\r\n      this.$axios({\r\n        url: \"/attend/addAttendance\",\r\n        method: \"post\",\r\n        data: data,\r\n      })\r\n        .then((response) => {\r\n          if (response.data === 1) {\r\n            this.attendanceTime = null;\r\n            this.attendanceDialogVisible = false;\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"发布成功！\",\r\n            });\r\n          } else {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"已发布过此考勤！\",\r\n            });\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"发布失败！请重试！\",\r\n          });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.taskTab {\r\n  height: 100%;\r\n  margin-top: 20px;\r\n  margin-right: 50px;\r\n  margin-left: 40px;\r\n  background-color: white;\r\n}\r\n\r\n.el-icon-user-solid,\r\n.el-icon-s-cooperation {\r\n  font-size: 180px;\r\n  margin-left: 40px;\r\n}\r\n\r\n.choice {\r\n  font-size: 25px;\r\n  margin-left: 55px;\r\n}\r\n\r\n.typeCard {\r\n  width: 300px;\r\n  border-width: 2px;\r\n  margin-top: 90px;\r\n  margin-left: 170px;\r\n  margin-right: 30px;\r\n}\r\n\r\n.btn_dialog {\r\n  margin-right: 5px;\r\n}\r\n</style>"]}]}